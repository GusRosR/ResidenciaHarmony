

## Vista general del sistema de archivos


Es importante conocer los diversos contenidos de los archivos que se generan cuando se crea un proyecto en DevEco Studio para desarrollar aplicaciones o servicios en HarmonyOS. 

Las aplicaciones en HarmonyOS se despliegan como un paquete con la extensión .app conocido como Paquete de Aplicación. Dicho elemento contiene uno o más Paquetes de Habilidades de HarmonyOS o HarmonyOS Ability Package (HAP) así como el archivo pack.info que describe los atributos de cada uno de estos archivos HAP, estos archivos sirven para desplegar capacidades o funcionalidades, sobre las cuales se realizará el código de una aplicación HarmonyOS.
En otras palabras, cada aplicación puede subdividirse en archivos en los que cada uno se encarga de una función o característica específica de la aplicación y el archivo der información sirve como una especie de manual para entender lo que hace y cómo se componen todos los archivos HAP, es relevante mencionar que este archivo es creado por DevEco Studio ya que con este archivo, la tienda de aplicaciones, osease AppGallery Connect, desempacará los archivos y almacenará las HAP por categorías.

A continuación, se muestra una imagen para ilustrar la explicación provista anteriormente:

![[FSAppsHarmony.png]]

## Tipos de archivos

A continuación, se describirán algunos de los archivos que se pueden encontrar en un proyecto de HarmonyOS.

- **HAR**: Las siglas hacen referencia a HarmonyOS Ability Resources, este provee todo el contenido que se requiere para elaborar una aplicación incluyendo el código fuente, archivos de recursos como imágenes, iconos, videos, entre otros y los archivos config.json. No obstante, HAR no se puede instalar de manera independiente en un dispositivo, cosa que sí se puede hacer con un archivo HAP. En lugar de eso, se puede hacer referencia a él sólo como la [[dependencia]] de un módulo de una aplicación.
- **Entry.hap:** Es el módulo principal de la aplicación. Para los mismos tipos de dispositivos, cada aplicación debe contener sólo un archivo de este tipo, el cual puede ser instalado de manera independiente ya que como se mencionó en el punto anterior, es una característica que comparten los archivos tipo HAP, así como puede ser ejecutado de manera independiente.
- **Feature.hap:** Es un módulo dinámico de funcionalidad en una aplicación. Las aplicaciones pueden tener más de uno o ningún archivo de este tipo, no obstante, únicamente podrán ser ejecutados de manera independiente los archivos de este tipo que contengan "abilities".
- **Ability:** Se le denomina una habilidad o "ability" a una abstracción o bien, una representación de una funcionalidad que una aplicación puede proveer. Una aplicación puede contener una o más habilidades. Éstas se clasifican entre Feature Abilities (FAs) y Particle Abilities (PAs), para información detallada de estos conceptos consultar [[Arquitectura de Harmony OS]] en el apartado **Capa de Aplicación**.
- **Library Files o Archivos de Librerías:** Estos archivos son elementos externos que contienen código que brinda una o más funciones específicas de las que depende la aplicación que se desarrollará. Estos son archivos cuyo contenido es binario y las extensiones suelen ser; .so, .jar, .bin y .har, almacenados en el directorio **libs**.
- **Resource Files o Archivos de Recursos:** Como se ha mencionado anteriormente, aquí se encuentran usualmente todos los recursos necesarios para brindar estilo y personalización a las aplicaciones tales como videos, pistas de audio, imágenes, entre otros. Se encuentran en el directorio **resources** permitiendo acceder, utilizar y mantener dichos archivos de manera sencilla y organizada.
- **Configuration File o Archivo de Configuración:** Este archivo es el mencionado config.json, se utiliza para declarar las habilidades de una aplicación y los permisos necesarios para que la misma pueda funcionar correctamente en el dispositivo. Algunos de los contenidos de este archivo son:
	- Configuraciones globales de la app como el vendedor, versión, nombre puesto al programa, entre otros.
	- Configuraciones relacionadas a respaldos o configuraciones de red de seguridad.
	- Configuraciones del archivo HAP, incluyendo los atributos básicos que se deben definir para cada habilidad, tales como el nombre de cada habilidad, el nombre de la clase y su tipo, así mismo se establecen los permisos necesarios para acceder a partes protegidas por el sistema o a otra aplicación.


## Sub-directorios contenidos en un proyecto

A continuación, se muestra una tabla con algunos de los sub-directorios que se encuentran en el directorio de **resources** o recursos.

| **Grupo de sub-directorios de recursos** | **Descripción**                                                                                                                                                                                                                                                                                                                                                                                                                     | **Archivo de recursos**                                                                                                                                                                                                                                                                                                |
| :--------------------------------------: | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                 element                  | Aquí se indican recursos de elementos. Cada tipo de dato se representa en un archivo JSON. Las opciones son las siguientes:<br><br>- **Boolean:** Datos booleanos<br>- **color:** Datos de color<br>- **float:** Datos de punto flotante<br>- **intarray:** Arreglo de enteros<br>- **pattern:** Datos de patrones<br>- **[[plural]]:** Datos plurales <br>- **starray:** Arreglo de cadenas<br>- **string:** Datos tipo cadena<br> | Se recomienda que los archivos que se encuentran en el sub-directorio **element** se llamen de la siguiente manera pudiendo sólo contener datos del mismo tipo:<br><br>- boolean.json<br>- color.json<br>- float.json<br>- intarray.json<br>- pattern.json<br>- plural.json<br>- starray.json<br>- string.json<br><br> |
|                  media                   | Indica archivos como imágenes, videos y audios.                                                                                                                                                                                                                                                                                                                                                                                     | El nombre de este archivo puede ser personalizado, por ejemplo, imagen.png.                                                                                                                                                                                                                                            |
|                animation                 | Almacena recursos de animación en formato XML.                                                                                                                                                                                                                                                                                                                                                                                      | El nombre de este archivo puede ser personalizado, por ejemplo, fade_in.xml.                                                                                                                                                                                                                                           |
|                  layout                  | Indica recursos de organización visual en formato XML:                                                                                                                                                                                                                                                                                                                                                                              | El nombre de este archivo puede ser personalizado, por ejemplo, layout_inicio.xml.                                                                                                                                                                                                                                     |
|                 graphic                  | Almacena recursos gráficos en formato XML.                                                                                                                                                                                                                                                                                                                                                                                          | El nombre de este archivo puede ser personalizado, por ejemplo, notificacion_elegante.xml.                                                                                                                                                                                                                             |
|                 profile                  | Se almacenan otros tipos de archivos en sus formatos respectivos.                                                                                                                                                                                                                                                                                                                                                                   | El nombre de este archivo puede ser personalizado.                                                                                                                                                                                                                                                                     |

## Nomenclatura de las carpetas de recursos

Ahora bien, Huawei realiza recomendaciones acerca de cómo se deberían de nombrar las carpetas con los diferentes recursos que se requieran durante el proceso de desarrollo . A continuación, se muestra en una tabla dichas recomendaciones dependiendo de diferentes cualidades y situaciones.

| Tipo de calificador     | Descripción y rango de valores                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ----------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Lenguaje                | Indica el lenguaje que utiliza el dispositivo. Este valor consiste en dos o tres letras en minúscula, por ejemplo; zh indica Chino, en indica Inglés, y así sucesivamente. La norma [ISO 639](https://omegat.sourceforge.io/manual-standard/es/appendix.languages.html) muestra información acerca de otros lenguajes.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Script / Gramática      | Indica la gramática que utiliza el dispositivo. El valor de este parámetro empieza con una letra en mayúscula y es continuado por 3 letras minúscula. Por ejemplo; Hans significa Chino simplificado y Hant significa Chino tradicional. Es decir, este parámetro indica dentro de los idiomas, la gramática junto con sus regionalismos y/o herramientas de lenguaje dependiendo del área de la que se hable. Para más información consultar la norma [ISO 15924](https://localizely.com/iso-15924-list/)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| País / Región           | Indica la región en la que se encuentra el usuario. El valor de este parámetro consiste en dos o tres letras en mayúscula, por ejemplo; CN significa China, GB significa Reino Unido, entre otros. Para más información consultar la norma [ISO-3166-1](https://www.rallybel.com/es/links_iso_code3.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Orientación de pantalla | Indica la orientación de la pantalla del dispositivo. Los valores pueden ser:<br><br>- **vertical:** Orientación de retrato<br>- **horizontal:** Orientación de paisaje<br><br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Tipo de dispositivo     | Indica el tipo de dispositivo. Los valores pueden ser:<br><br>- **phone:** Teléfono<br>- **tablet:** Tablet<br>- **car:** Unidad central coloquialmente conocido como estéreo con pantalla<br>- **tv:** Smart TV<br>- **wearable:** Dispositivos que puedan usarse como accesorio, osea relojes o bandas inteligentes.<br><br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Densidad de pantalla    | Indica la densidad de la pantalla del dispositivo en [[DPIs]]. Los valores pueden ser:<br><br>- **sdpi:** Densidad de pantalla con puntos por pulgada de pequeña escala. Este valor se aplica a dispositivos con un rango DPI de (0,120].<br>- **mdpi:** Densidad de pantalla con puntos por pulgada de mediana escala. Este valor se aplica a dispositivos con un rango DPI de (120,160].<br>- **ldpi:** Densidad de pantalla con puntos por pulgada de gran escala. Este valor se aplica a dispositivos con un rango DPI de (160, 240].<br>- **xdpi:** Densidad de pantalla con puntos por pulgada de escala extra grande. Este valor se aplica a dispositivos con un rango DPI de (240, 320].<br>- **xxdpi:** Densidad de pantalla con puntos por pulgada de escala extra-extra grande. Este valor se aplica a dispositivos con un rango DPI de (320, 480].<br>- **xxxdpi:** Densidad de pantalla con puntos por pulgada de escala extra-extra-extra grande. Este valor se aplica a dispositivos con un rango DPI de (480, 640].<br><br> |

El orden que llevan las carpetas o archivos debe ser el siguiente:

lenguaje_script_país/región-orientación de pantalla-tipo de dispositivo-densidad de pantalla.

Por ejemplo, si se imagina que tenemos un archivo de maquetación o disposición, que se diseñó en inglés, usando gramática latina, el país es Estados Unidos, se usó una orientación de paisaje, en una tablet con alta densidad en la pantalla. Entonces, la carpeta para esta configuración se llamaría de la siguiente manera:

	res/en_Latn_US-land-tablet-hdpi/

Siguiendo esta secuencia, HarmonyOS puede seleccionar los mejores recursos para brindarle al usuario la mejor experiencia posible, ya que al subir una aplicación a AppGallery Connect se debe recordar que esta pasa por una inspección.


## Permisos de las aplicaciones (Seguridad de las apps)


La aplicación que se desarrolla tiene la capacidad de personalizar los permisos que se requieren al usuario relacionados a las partes protegidas del sistema o bien de alguna interfaz. De igual manera, puede involucrar permisos requeridos para acceder objetos u otras instancias de otros programas igualmente protegidos por permisos.

### Requerir permisos

- Se declara el permiso requerido por la aplicación
- Se configura la declaración dinámica del permiso de la siguiente manera:

		"module": {
			"reqPermissions":[
				{
					"name": "ohos.permission.CAMERA",
					"reason": "$string:permreason_camera",
					"usedScene": {
						"ability": {"com.mycamera.Ability", 
						"com.mycamera.AbilityBackground"},
						"when": "always"
					}
				},{
					otros permisos
				}
			]
		}

- Aplicar los permisos de manera dinámica de la siguiente manera:
  
	  if(verifySelfPermission(""))
